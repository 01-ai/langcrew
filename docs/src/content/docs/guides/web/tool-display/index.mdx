---
title: Tool Display
description: Rich visualization and management of tool calls in web interfaces
---

LangCrew's tool display manager (`ToolDisplayManager`) provides rich visualization and management of tool calls in web interfaces, enabling intuitive presentation of agent tool usage.

## Overview

The tool display module (`langcrew.web.tool_display`) offers:
- **Rich Visualization**: Formatted display of tool calls and results
- **Interactive Elements**: User-friendly tool interaction interfaces
- **Progress Tracking**: Real-time tool execution status
- **Error Handling**: Clear presentation of tool failures

## Basic Usage

### Tool Display Manager

```python
from langcrew.web import ToolDisplayManager
from langcrew.web.protocol import MessageType, StreamMessage

# Create display manager
display_manager = ToolDisplayManager()

# Register tool display handlers
@display_manager.register_tool("web_search")
def display_web_search(tool_call, tool_result=None):
    """Custom display for web search tool"""
    return {
        "title": "Web Search",
        "icon": "search",
        "description": f"Searching for: {tool_call['arguments']['query']}",
        "status": "completed" if tool_result else "running",
        "result_summary": f"Found {len(tool_result.get('results', []))} results" if tool_result else None
    }

@display_manager.register_tool("data_analysis") 
def display_data_analysis(tool_call, tool_result=None):
    """Custom display for data analysis tool"""
    return {
        "title": "Data Analysis",
        "icon": "chart",
        "description": f"Analyzing dataset: {tool_call['arguments']['dataset']}",
        "status": "completed" if tool_result else "running",
        "visualization": tool_result.get("chart_data") if tool_result else None
    }
```

### Integration with Streaming

```python
from langcrew.web import ToolDisplayManager
from langcrew.web.protocol import StreamMessage, MessageType

async def stream_with_tool_display(agent_response):
    """Stream agent responses with enhanced tool display"""
    display_manager = ToolDisplayManager()
    
    async for chunk in agent_response:
        if chunk.type == MessageType.TOOL_CALL:
            # Enhance tool call display
            display_info = display_manager.format_tool_call(
                tool_name=chunk.detail["tool_name"],
                arguments=chunk.detail["arguments"],
                tool_id=chunk.detail["tool_id"]
            )
            
            # Create enhanced message
            enhanced_message = StreamMessage(
                id=chunk.id,
                role=chunk.role,
                type=MessageType.TOOL_CALL,
                content=chunk.content,
                detail={
                    **chunk.detail,
                    "display": display_info
                },
                timestamp=chunk.timestamp,
                session_id=chunk.session_id
            )
            
            yield enhanced_message
            
        elif chunk.type == MessageType.TOOL_RESULT:
            # Enhance tool result display
            display_info = display_manager.format_tool_result(
                tool_name=chunk.detail["tool_name"],
                result=chunk.detail["result"],
                tool_id=chunk.detail["tool_id"]
            )
            
            enhanced_message = StreamMessage(
                id=chunk.id,
                role=chunk.role,
                type=MessageType.TOOL_RESULT,
                content=chunk.content,
                detail={
                    **chunk.detail,
                    "display": display_info
                },
                timestamp=chunk.timestamp,
                session_id=chunk.session_id
            )
            
            yield enhanced_message
        else:
            yield chunk
```

## Display Configurations

### Tool-Specific Displays

```python
from langcrew.web import ToolDisplayManager

display_manager = ToolDisplayManager()

# File operations
@display_manager.register_tool("read_file")
def display_file_read(tool_call, tool_result=None):
    file_path = tool_call["arguments"]["file_path"]
    return {
        "title": "File Reader",
        "icon": "file-text",
        "description": f"Reading file: {file_path}",
        "status": "completed" if tool_result else "running",
        "preview": tool_result[:200] + "..." if tool_result and len(tool_result) > 200 else tool_result,
        "file_info": {
            "path": file_path,
            "size": len(tool_result) if tool_result else None,
            "type": "text" if tool_result else None
        }
    }

# API calls
@display_manager.register_tool("api_request")
def display_api_request(tool_call, tool_result=None):
    url = tool_call["arguments"]["url"]
    method = tool_call["arguments"].get("method", "GET")
    
    return {
        "title": "API Request",
        "icon": "globe",
        "description": f"{method} {url}",
        "status": "completed" if tool_result else "running",
        "request_info": {
            "method": method,
            "url": url,
            "headers": tool_call["arguments"].get("headers", {}),
        },
        "response_info": {
            "status_code": tool_result.get("status_code") if tool_result else None,
            "response_size": len(str(tool_result.get("data", ""))) if tool_result else None
        } if tool_result else None
    }

# Database operations
@display_manager.register_tool("sql_query")
def display_sql_query(tool_call, tool_result=None):
    query = tool_call["arguments"]["query"]
    
    return {
        "title": "SQL Query",
        "icon": "database",
        "description": "Executing database query",
        "status": "completed" if tool_result else "running",
        "query_info": {
            "query": query,
            "query_type": query.strip().split()[0].upper(),
        },
        "result_info": {
            "rows_affected": len(tool_result) if isinstance(tool_result, list) else None,
            "columns": list(tool_result[0].keys()) if tool_result and isinstance(tool_result, list) and tool_result else None
        } if tool_result else None
    }
```

### Progress Indicators

```python
from langcrew.web import ToolDisplayManager

class ProgressTrackingDisplayManager(ToolDisplayManager):
    """Display manager with progress tracking"""
    
    def __init__(self):
        super().__init__()
        self.tool_progress = {}
    
    def update_tool_progress(self, tool_id: str, progress: float, status: str):
        """Update tool execution progress"""
        self.tool_progress[tool_id] = {
            "progress": progress,
            "status": status,
            "updated_at": time.time()
        }
    
    def format_tool_call(self, tool_name: str, arguments: dict, tool_id: str):
        """Format tool call with progress info"""
        base_format = super().format_tool_call(tool_name, arguments, tool_id)
        
        # Add progress info if available
        progress_info = self.tool_progress.get(tool_id, {})
        if progress_info:
            base_format["progress"] = progress_info
        
        return base_format

# Usage with progress updates
display_manager = ProgressTrackingDisplayManager()

# During tool execution, update progress
display_manager.update_tool_progress("tool_123", 0.3, "processing")
display_manager.update_tool_progress("tool_123", 0.7, "analyzing") 
display_manager.update_tool_progress("tool_123", 1.0, "completed")
```

## Frontend Integration

### React Components

```jsx
// React components for tool display
import React from 'react';

function ToolCallDisplay({ message }) {
    const { detail } = message;
    const display = detail.display || {};
    
    return (
        <div className="tool-call">
            <div className="tool-header">
                <span className="tool-icon">{display.icon}</span>
                <h3 className="tool-title">{display.title}</h3>
                <span className={`tool-status ${display.status}`}>
                    {display.status}
                </span>
            </div>
            
            <div className="tool-description">
                {display.description}
            </div>
            
            {display.progress && (
                <div className="tool-progress">
                    <div className="progress-bar">
                        <div 
                            className="progress-fill" 
                            style={{width: `${display.progress.progress * 100}%`}}
                        />
                    </div>
                    <span className="progress-text">
                        {Math.round(display.progress.progress * 100)}%
                    </span>
                </div>
            )}
            
            {display.request_info && (
                <div className="tool-details">
                    <h4>Request Details</h4>
                    <pre>{JSON.stringify(display.request_info, null, 2)}</pre>
                </div>
            )}
        </div>
    );
}

function ToolResultDisplay({ message }) {
    const { detail } = message;
    const display = detail.display || {};
    
    return (
        <div className="tool-result">
            <div className="result-header">
                <span className="tool-icon">{display.icon}</span>
                <h3 className="tool-title">{display.title} - Result</h3>
                <span className={`result-status ${display.status}`}>
                    {display.status}
                </span>
            </div>
            
            {display.result_summary && (
                <div className="result-summary">
                    {display.result_summary}
                </div>
            )}
            
            {display.visualization && (
                <div className="result-visualization">
                    <ChartComponent data={display.visualization} />
                </div>
            )}
            
            {display.preview && (
                <div className="result-preview">
                    <h4>Preview</h4>
                    <pre className="preview-content">{display.preview}</pre>
                </div>
            )}
            
            {display.response_info && (
                <div className="response-details">
                    <h4>Response Details</h4>
                    <div className="response-stats">
                        <span>Status: {display.response_info.status_code}</span>
                        <span>Size: {display.response_info.response_size} bytes</span>
                    </div>
                </div>
            )}
        </div>
    );
}

// Main message component
function MessageComponent({ message }) {
    switch(message.type) {
        case 'tool_call':
            return <ToolCallDisplay message={message} />;
        case 'tool_result':
            return <ToolResultDisplay message={message} />;
        case 'text':
            return <div className="text-message">{message.content}</div>;
        default:
            return <div>Unknown message type: {message.type}</div>;
    }
}
```

### Vue.js Components

```vue
<!-- ToolDisplay.vue -->
<template>
  <div class="tool-display">
    <!-- Tool Call Display -->
    <div v-if="message.type === 'tool_call'" class="tool-call">
      <div class="tool-header">
        <i :class="`icon-${display.icon}`"></i>
        <h3>{{ display.title }}</h3>
        <span :class="`status ${display.status}`">{{ display.status }}</span>
      </div>
      
      <p class="tool-description">{{ display.description }}</p>
      
      <!-- Progress Bar -->
      <div v-if="display.progress" class="progress-container">
        <div class="progress-bar">
          <div 
            class="progress-fill" 
            :style="{width: `${display.progress.progress * 100}%`}"
          ></div>
        </div>
        <span class="progress-text">
          {{ Math.round(display.progress.progress * 100) }}%
        </span>
      </div>
      
      <!-- Tool Arguments -->
      <div v-if="display.request_info" class="tool-arguments">
        <h4>Arguments</h4>
        <pre>{{ JSON.stringify(display.request_info, null, 2) }}</pre>
      </div>
    </div>
    
    <!-- Tool Result Display -->
    <div v-else-if="message.type === 'tool_result'" class="tool-result">
      <div class="result-header">
        <i :class="`icon-${display.icon}`"></i>
        <h3>{{ display.title }} - Result</h3>
        <span :class="`status ${display.status}`">{{ display.status }}</span>
      </div>
      
      <p v-if="display.result_summary" class="result-summary">
        {{ display.result_summary }}
      </p>
      
      <!-- Visualization -->
      <div v-if="display.visualization" class="visualization">
        <chart-component :data="display.visualization" />
      </div>
      
      <!-- Preview -->
      <div v-if="display.preview" class="preview">
        <h4>Preview</h4>
        <pre class="preview-content">{{ display.preview }}</pre>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: 'ToolDisplay',
  props: {
    message: {
      type: Object,
      required: true
    }
  },
  computed: {
    display() {
      return this.message.detail?.display || {};
    }
  }
};
</script>

<style scoped>
.tool-display {
  margin: 10px 0;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  padding: 15px;
}

.tool-header, .result-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
}

.progress-container {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 10px 0;
}

.progress-bar {
  flex: 1;
  height: 8px;
  background: #f0f0f0;
  border-radius: 4px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: #4caf50;
  transition: width 0.3s ease;
}

.status.running {
  color: #ff9800;
}

.status.completed {
  color: #4caf50;
}

.status.failed {
  color: #f44336;
}

.preview-content {
  background: #f5f5f5;
  padding: 10px;
  border-radius: 4px;
  overflow-x: auto;
}
</style>
```

## Advanced Features

### Interactive Tool Approval

```python
from langcrew.web import ToolDisplayManager
from langcrew.web.protocol import MessageType

class InteractiveDisplayManager(ToolDisplayManager):
    """Display manager with interactive approval"""
    
    def format_approval_request(self, tool_call, risk_level="medium"):
        """Format tool approval request"""
        return {
            "title": f"Approval Required: {tool_call['tool_name']}",
            "icon": "alert-triangle",
            "description": f"Agent wants to use {tool_call['tool_name']}",
            "risk_level": risk_level,
            "tool_info": {
                "name": tool_call["tool_name"],
                "arguments": tool_call["arguments"],
                "description": self.get_tool_description(tool_call["tool_name"])
            },
            "actions": [
                {"id": "approve", "label": "Approve", "style": "primary"},
                {"id": "reject", "label": "Reject", "style": "danger"},
                {"id": "modify", "label": "Modify", "style": "secondary"}
            ]
        }
    
    def get_tool_description(self, tool_name: str) -> str:
        """Get human-readable tool description"""
        descriptions = {
            "send_email": "Send an email message",
            "delete_file": "Delete a file from the filesystem",
            "api_request": "Make an HTTP request to an external service",
            "sql_query": "Execute a SQL query on the database"
        }
        return descriptions.get(tool_name, f"Execute {tool_name} tool")
```

### Tool Result Visualization

```python
from langcrew.web import ToolDisplayManager
import json

class VisualizationDisplayManager(ToolDisplayManager):
    """Display manager with data visualization"""
    
    @display_manager.register_tool("data_analysis")
    def display_data_analysis(self, tool_call, tool_result=None):
        """Display data analysis with charts"""
        if not tool_result:
            return {
                "title": "Data Analysis",
                "icon": "bar-chart",
                "description": "Analyzing data...",
                "status": "running"
            }
        
        # Process analysis results
        chart_data = self.prepare_chart_data(tool_result)
        
        return {
            "title": "Data Analysis Complete",
            "icon": "bar-chart",
            "description": f"Analyzed {tool_result.get('rows_processed', 0)} rows",
            "status": "completed",
            "visualizations": [
                {
                    "type": "bar_chart",
                    "title": "Distribution",
                    "data": chart_data["distribution"]
                },
                {
                    "type": "line_chart", 
                    "title": "Trends",
                    "data": chart_data["trends"]
                }
            ],
            "summary": {
                "total_rows": tool_result.get("rows_processed", 0),
                "insights": tool_result.get("insights", []),
                "confidence": tool_result.get("confidence", 0.0)
            }
        }
    
    def prepare_chart_data(self, analysis_result):
        """Prepare data for visualization"""
        return {
            "distribution": analysis_result.get("distribution_data", []),
            "trends": analysis_result.get("trend_data", [])
        }
```

### Error Display

```python
from langcrew.web import ToolDisplayManager

class ErrorDisplayManager(ToolDisplayManager):
    """Display manager with enhanced error handling"""
    
    def format_tool_error(self, tool_call, error_info):
        """Format tool execution error"""
        error_type = error_info.get("error_type", "Unknown")
        error_message = error_info.get("error_message", "Tool execution failed")
        
        return {
            "title": f"Tool Error: {tool_call['tool_name']}",
            "icon": "alert-circle",
            "description": f"Failed to execute {tool_call['tool_name']}",
            "status": "failed",
            "error_info": {
                "type": error_type,
                "message": error_message,
                "recoverable": error_info.get("recoverable", False),
                "suggested_action": error_info.get("suggested_action", "Contact support")
            },
            "troubleshooting": self.get_troubleshooting_info(error_type),
            "actions": [
                {"id": "retry", "label": "Retry", "style": "primary"},
                {"id": "skip", "label": "Skip", "style": "secondary"},
                {"id": "abort", "label": "Abort", "style": "danger"}
            ] if error_info.get("recoverable") else []
        }
    
    def get_troubleshooting_info(self, error_type: str) -> list:
        """Get troubleshooting suggestions"""
        troubleshooting = {
            "NetworkError": [
                "Check internet connection",
                "Verify API endpoints are accessible",
                "Check firewall settings"
            ],
            "AuthenticationError": [
                "Verify API keys are correct",
                "Check token expiration",
                "Ensure proper permissions"
            ],
            "ValidationError": [
                "Check input parameters",
                "Verify data format",
                "Review required fields"
            ]
        }
        return troubleshooting.get(error_type, ["Contact support for assistance"])
```

## Next Steps

- **[HTTP Server](/guides/web/http-server)** - FastAPI server setup and configuration
- **[Streaming](/guides/web/streaming)** - Server-Sent Events and message types
- **[LangGraph Integration](/guides/web/langgraph-integration)** - Direct LangGraph adapter usage
- **[Web Concepts](/concepts/web)** - Understanding web architecture