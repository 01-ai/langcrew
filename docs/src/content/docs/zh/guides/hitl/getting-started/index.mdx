---
title: HITL å¿«é€Ÿå¼€å§‹
description: 5åˆ†é’Ÿå†…å¼€å§‹ä½¿ç”¨äººæœºåä½œåŠŸèƒ½
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

åœ¨ langcrew ä¸­å¿«é€Ÿä¸Šæ‰‹äººæœºåä½œï¼ˆHITLï¼‰åŠŸèƒ½ï¼Œä»…éœ€ 5 åˆ†é’Ÿã€‚

## å®‰è£…

HITL åŒ…å«åœ¨ langcrew ä¸­ - æ— éœ€é¢å¤–å®‰è£…ï¼š

```bash
uv add langcrew --prerelease=allow --index https://nexus.lingyiwanwu.net/repository/pypi-hosted/simple
```

## åŸºç¡€ç¤ºä¾‹

è¿™æ˜¯ä¸€ä¸ªåœ¨å†™å…¥æ–‡ä»¶å‰éœ€è¦å®¡æ‰¹çš„ç®€å•ç¤ºä¾‹ï¼š

```python
from langcrew import Agent, Crew
from langcrew.hitl import HITLConfig
from langcrew_tools import FileWriteTool

# ä¸ºæ–‡ä»¶æ“ä½œé…ç½® HITL
hitl_config = HITLConfig(
    interrupt_before_tools=["file_write"]
)

# åˆ›å»ºå¸¦ HITL çš„æ™ºèƒ½ä½“
agent = Agent(
    role="æ–‡ä»¶ç®¡ç†å™¨",
    goal="åœ¨äººå·¥æ‰¹å‡†ä¸‹ç®¡ç†æ–‡ä»¶",
    backstory="è°¨æ…çš„æ–‡ä»¶ç®¡ç†å™¨ï¼Œå†™å…¥å‰ä¼šè¯¢é—®",
    tools=[FileWriteTool()],
    hitl=hitl_config
)

# åˆ›å»ºå›¢é˜Ÿ
crew = Crew(agents=[agent])

# åœ¨å°è¯•å†™å…¥æ–‡ä»¶æ—¶ä¼šæš‚åœç­‰å¾…å®¡æ‰¹
result = crew.kickoff(inputs={"task": "åˆ›å»ºä¸€ä¸ªæ‘˜è¦æ–‡ä»¶"})
```

## æ‰§è¡Œæµç¨‹

1. **æ™ºèƒ½ä½“å¯åŠ¨**ï¼šæ™ºèƒ½ä½“æ¥æ”¶ä»»åŠ¡
2. **å·¥å…·è°ƒç”¨**ï¼šæ™ºèƒ½ä½“å°è¯•ä½¿ç”¨ `file_write` å·¥å…·
3. **ä¸­æ–­**ï¼šç³»ç»Ÿæš‚åœå¹¶è¯·æ±‚å®¡æ‰¹
4. **ç”¨æˆ·å“åº”**ï¼šæ‚¨æ‰¹å‡†æˆ–æ‹’ç»æ“ä½œ
5. **ç»§ç»­æ‰§è¡Œ**ï¼šæ™ºèƒ½ä½“æ ¹æ®æ‚¨çš„å†³å®šç»§ç»­

## ç”¨æˆ·å“åº”

<Tabs>
<TabItem label="ç®€å•å®¡æ‰¹">

```python
# æœ‰æ•ˆçš„ç®€å•å“åº”ï¼š
"yes"        # æ‰¹å‡†
"no"         # æ‹’ç»  
"approve"    # æ‰¹å‡†
"deny"       # æ‹’ç»
True         # æ‰¹å‡†
False        # æ‹’ç»
"æ‰¹å‡†"       # æ‰¹å‡†ï¼ˆä¸­æ–‡ï¼‰
"æ‹’ç»"       # æ‹’ç»ï¼ˆä¸­æ–‡ï¼‰
```

</TabItem>
<TabItem label="é«˜çº§å“åº”">

```python
# æ‰§è¡Œå‰ä¿®æ”¹å‚æ•°
{
    "approved": True,
    "modified_args": {
        "file_path": "/tmp/æ›´å¥½çš„æ–‡ä»¶å.txt",
        "content": "åŒ…å«ç”¨æˆ·è¾“å…¥çš„å¢å¼ºå†…å®¹"
    }
}
```

</TabItem>
</Tabs>

## å¸¸è§æ¨¡å¼

### æ‰¹å‡†å±é™©æ“ä½œ

```python
from langcrew.hitl import HITLConfig

# éœ€è¦æ‰¹å‡†æ½œåœ¨å±é™©çš„å·¥å…·
hitl_config = HITLConfig(
    interrupt_before_tools=[
        "file_delete",
        "database_write", 
        "send_email",
        "external_api"
    ]
)
```

### å®¡æŸ¥ç”Ÿæˆçš„å†…å®¹

```python
# å†…å®¹ç”Ÿæˆåå®¡æŸ¥ç»“æœ
hitl_config = HITLConfig(
    interrupt_after_tools=[
        "content_generator",
        "report_writer",
        "data_analyzer"
    ]
)
```

### å›¢é˜Ÿçº§ç­–ç•¥

```python
# å°† HITL ç­–ç•¥åº”ç”¨åˆ°æ•´ä¸ªå›¢é˜Ÿ
crew = Crew(
    agents=[researcher, writer, reviewer],
    hitl=HITLConfig(
        interrupt_before_tools=["web_search", "file_write"]
    )
)
```

## æµ‹è¯•æ‚¨çš„è®¾ç½®

### è¿è¡Œå®Œæ•´ç¤ºä¾‹

æµ‹è¯• HITL æœ€ç®€å•çš„æ–¹æ³•æ˜¯è¿è¡Œæˆ‘ä»¬çš„ç»¼åˆç¤ºä¾‹ï¼š

```bash
# è®¾ç½®æ‚¨çš„ OpenAI API å¯†é’¥
export OPENAI_API_KEY=your_api_key_here

# ä» HITL ç¤ºä¾‹ç›®å½•è¿è¡Œ
cd examples/components/hitl
uv run hitl_example.py
```

è¿™ä¸ªç¤ºä¾‹æ¼”ç¤ºäº†ï¼š
- 9 ç§ä¸åŒçš„ HITL é…ç½®æ¨¡å¼
- å¸¦å¤šè¯­è¨€æ”¯æŒçš„å·¥å…·å®¡æ‰¹å·¥ä½œæµ
- å‚æ•°å’Œç»“æœä¿®æ”¹
- å®Œæ•´çš„ä¸­æ–­/æ¢å¤å¾ªç¯

## æ›´å¤šç¤ºä¾‹

è¦äº†è§£æ›´å¤š HITL ç¤ºä¾‹å’Œæ¨¡å¼ï¼Œè¯·æŸ¥çœ‹[ç¤ºä¾‹ç›®å½•](https://github.com/01-ai/langcrew/tree/main/examples/components/hitl)ï¼š

- **ğŸ“ `examples/components/hitl/`** - åŒ…å«9ç§é…ç½®æ¨¡å¼çš„å®Œæ•´ HITL å®ç°
- **ğŸ“„ `examples/components/hitl/README.md`** - è¯¦ç»†çš„è®¾ç½®å’Œä½¿ç”¨è¯´æ˜
- **ğŸ `examples/components/hitl/hitl_example.py`** - å®Œæ•´å¯è¿è¡Œç¤ºä¾‹ï¼ˆ600+è¡Œä»£ç ï¼‰

åœ¨æ‚¨çš„æœ¬åœ°å‰¯æœ¬ä¸­å¯¼èˆªåˆ°è¿™äº›æ–‡ä»¶æˆ–[åœ¨çº¿æŸ¥çœ‹](https://github.com/01-ai/langcrew/tree/main/examples/components/hitl)ï¼Œä»¥æ¢ç´¢ä¸åŒçš„ HITL åœºæ™¯ã€‚

### ç®€å•æµ‹è¯•ä»£ç 

å¯¹äºæœ€å°æµ‹è¯•ï¼Œæ‚¨ä¹Ÿå¯ä»¥å°è¯•ï¼š

```python
from langcrew import Agent
from langcrew.hitl import HITLConfig
from langcrew_tools import FileWriteTool

# ç®€å•çš„æµ‹è¯•æ™ºèƒ½ä½“
test_agent = Agent(
    role="æ–‡ä»¶æµ‹è¯•å‘˜",
    goal="æµ‹è¯• HITL æ–‡ä»¶æ“ä½œ", 
    backstory="ç”¨äºæ–‡ä»¶æ“ä½œçš„æµ‹è¯•æ™ºèƒ½ä½“",
    tools=[FileWriteTool()],
    hitl=HITLConfig(interrupt_before_tools=["file_write"])
)

# è¿™åº”è¯¥åœ¨å°è¯•å†™å…¥æ–‡ä»¶æ—¶è§¦å‘ä¸­æ–­
crew = Crew(agents=[test_agent])
result = crew.kickoff(inputs={"task": "åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶"})
```

## ä¸‹ä¸€æ­¥

ç°åœ¨æ‚¨å·²ç»è®© HITL å·¥ä½œäº†ï¼š

- **[é…ç½®æŒ‡å—](/zh/guides/hitl/configuration)** - å­¦ä¹ æ‰€æœ‰é…ç½®é€‰é¡¹
- **[HITL æ¦‚å¿µ](/zh/concepts/hitl)** - ç†è§£ HITL æ¶æ„å’Œç»„ä»¶
- **[ç¤ºä¾‹](https://github.com/01-ai/langcrew/tree/main/examples/components/hitl)** - äº†è§£å®é™…å®ç°æ¡ˆä¾‹

## æ•…éšœæ’é™¤

### ä¸­æ–­æœªè§¦å‘

æ£€æŸ¥å·¥å…·åç§°æ˜¯å¦å®Œå…¨åŒ¹é…ï¼š
```python
# âŒ é”™è¯¯ - å·¥å…·åç§°ä¸åŒ¹é…
hitl_config = HITLConfig(interrupt_before_tools=["file_writer"])
agent = Agent(tools=[FileWriteTool()])  # å·¥å…·åç§°æ˜¯ "file_write"

# âœ… æ­£ç¡® - å®Œå…¨åŒ¹é…
hitl_config = HITLConfig(interrupt_before_tools=["file_write"])
```

### å¯¼å…¥é”™è¯¯

ç¡®ä¿æ‚¨ä»æ­£ç¡®çš„æ¨¡å—å¯¼å…¥ï¼š
```python
# æ ¸å¿ƒ HITL é…ç½®
from langcrew.hitl import HITLConfig

# ç”¨æˆ·è¾“å…¥å·¥å…·
from langcrew.tools.hitl import UserInputTool
```

éœ€è¦å¸®åŠ©ï¼ŸæŸ¥çœ‹æˆ‘ä»¬çš„[æ•…éšœæ’é™¤æŒ‡å—](/zh/guides/hitl/configuration#troubleshooting)æˆ–åœ¨[ç¤¾åŒºè®ºå›](https://github.com/01-ai/langcrew/discussions)æé—®ã€‚